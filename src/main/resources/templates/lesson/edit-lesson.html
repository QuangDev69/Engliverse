<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Edit Lesson</title>
    <!-- Thêm Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <!-- Thêm Quill CSS -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
</head>
<body>

<div class="container mt-5" th:if="${not #lists.isEmpty(course)}">
    <h2>Edit Lesson for: <span th:text="${course.courseName}"></span></h2>

    <form th:action="@{/courses/{courseId}/lessons/{lessonId}(courseId=${course.courseId}, lessonId=${lesson.id})}" th:object="${lesson}" method="post" class="mt-4">
        <div class="form-group">
            <label for="name">Lesson Name</label>
            <input type="text" th:field="*{name}" name="name" class="form-control" id="name" placeholder="Lesson Name">
        </div>

        <div class="form-group">
            <label for="code">Lesson Code</label>
            <input type="text" th:field="*{code}" name="code" class="form-control" id="code" placeholder="Lesson Code">
        </div>
        <div class="form-group">
            <label for="code">Lesson description</label>
            <input type="text" th:field="*{description}" name="description" class="form-control" id="description" placeholder="Lesson description">
        </div>

        <div class="form-group">
            <label for="content">Lesson content</label>
            <!-- Thay textarea bằng div cho Quill editor -->
            <div id="quill-editor" style="height: 200px;" th:utext="${lesson.content}"></div>
            <!-- Hidden input for description content -->
            <input type="hidden" th:field="*{content}" name="content" id="content">
        </div>
        <div class="d-flex justify-content-end">
            <button type="submit" class="btn btn-primary mx-3">Update</button>
            <a th:href="@{/courses/{courseId}(courseId=${course.courseId})}" class="btn btn-secondary">Back </a>
        </div>


    </form>
</div>


<!-- Thêm Quill JavaScript -->
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<script>
    var quill = new Quill('#quill-editor', {
        theme: 'snow'
    });

    var form = document.querySelector('form');
    form.onsubmit = function() {
        // Lưu nội dung từ Quill vào hidden input
        var content = document.querySelector('input[name=content]');
        content.value = quill.root.innerHTML;
    };
</script>

</body>
</html>
