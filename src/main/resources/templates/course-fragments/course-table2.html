<table th:fragment="course-table(courses)" class="table table-responsive  table-bordered">
    <thead class="table-light">
    <tr>
        <th>Image</th>
        <th>Course Name</th>
        <th>Topics</th>
        <th>Levels</th>
        <th>List Lesson of course</th>
        <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="course : ${courses}">
        <td class="align-middle">
            <img th:src="@{/image/{filename}(filename=${course.imagePath})}"
                 alt="Course Image" class="img-thumbnail" style="width: 100px; height: auto;">
        </td>
        <td class="align-middle"><a th:href="@{/courses/{id}(id=${course.courseId})}" class="text-decoration-none text-dark"
               th:text="${course.courseName}"></a></td>
        <td class="align-middle" th:text="${course.topicNames}">Topics</td>
        <td class="align-middle" th:text="${course.levelName}">Levels</td>
        <td class="align-middle">
            <div th:if="${not #lists.isEmpty(courseLessonsMap.get(course.courseId))}">
                <ul class="list-group list-group-flush">
                    <li th:each="lesson, iterStat : ${courseLessonsMap.get(course.courseId)}"
                        th:class="${iterStat.count > 2 ? 'list-group-item extra-lesson hidden' : 'list-group-item'}">
                        <span th:text="${lesson.name}">Lesson Name</span> -
                        <span th:text="${lesson.description}">Lesson Description</span>
                    </li>
                </ul>
                <button th:if="${#lists.size(courseLessonsMap.get(course.courseId)) > 2}"
                        class="btn btn-primary btn-sm show-all-btn" onclick="toggleLessons(this)">Show All</button>
            </div>
            <div th:unless="${not #lists.isEmpty(courseLessonsMap.get(course.courseId))}">
                <p>No lessons available for this course.</p>
            </div>
            <script>
                function toggleLessons(button) {
                    var listItems = button.parentElement.querySelectorAll('.extra-lesson');
                    listItems.forEach(function(item) {
                        item.classList.toggle('hidden');
                    });
                    button.textContent = button.textContent === 'Show All' ? 'Compact' : 'Show All';
                }

                // CSS để ẩn các bài học
                .hidden {
                    display: none;
                }
            </script>

        </td>


        <td class="align-middle">
            <div class="d-flex justify-content-start">
                <a th:href="@{/courses/{id}(id=${course.courseId})}" class="btn btn-primary me-2">Edit</a>
                <form th:action="@{/courses/{id}/delete(id=${course.courseId})}" method="post"
                      onsubmit="return confirm('Are you sure?')">
                    <button class="btn btn-danger" type="submit">Delete</button>
                    <input type="hidden" name="courseId" th:value="${course.courseId}"/>
                </form>
            </div>
        </td>
    </tr>
    </tbody>

</table>

